import{p as x,r as d,e as A,j as s,F as p,v as P,a as M,B as R,g as k,b as z,c as v}from"./index-2Plsp2nQ.js";import{F as h,M as B}from"./Form-CaXuUzTY.js";import{P as I,L as T,M as W}from"./AddBUForm-DTX2gUQB.js";x.div`
  width: 80%;
  margin: auto;
`;x.div`
  width: 100%;
  padding: 10px;
`;const l=x.div`
  width: 25%;
  margin: 10px;
`,G=({history:_})=>{var g,c,y,u;const[m,w]=d.useState(!1),[C,S]=d.useState([]),[r,a]=d.useState({error:!1,msg:"",isLoading:!1}),[e,E]=d.useState({first_name:"",last_name:"",email:"",phone_number:"",password:"",role_type:{roleName:"",id:0}}),o=n=>{E({...e,[n==null?void 0:n.name]:n==null?void 0:n.value})},L=async()=>{let n=`${v.baseUrl}/utilities/roleMasters`;try{const{data:t}=await k(n);S(t==null?void 0:t.data)}catch{}},F=async()=>{var j,f,b;a({...r,isLoading:!0});let n=`${v.baseUrl}/auth/registerAdmin`;const t={...e,resource_type:(j=e==null?void 0:e.role_type)==null?void 0:j.roleName,role_id:(f=e==null?void 0:e.role_type)==null?void 0:f.id,role_type:(b=e==null?void 0:e.role_type)==null?void 0:b.roleName};try{const{data:i}=await z(n,t);a({...r,isLoading:!1,error:i==null?void 0:i.error,msg:i==null?void 0:i.message}),setTimeout(()=>{a({...r,msg:""}),_.goBack()},3e3)}catch{a({...r,isLoading:!1,error:!0,msg:"Something Went Wrong!"}),setTimeout(()=>{a({...r,msg:""})},3e3)}},N=A({...e,role_type:(g=e==null?void 0:e.role_type)==null?void 0:g.roleName});return d.useEffect(()=>{L()},[]),s.jsxs("div",{style:{width:"90%",margin:"auto"},children:[s.jsx(p,{justifyContentCenter:!0,style:{marginTop:"1rem"},children:s.jsx("div",{style:{fontSize:"1.3rem",color:"#f65000"},children:"Register Sales Admin"})}),s.jsxs(I,{style:{background:"#fbfbfb",padding:"20px"},children:[s.jsxs(p,{alignItemsCenter:!0,margin:"auto",wrap:!0,width:"100%",justifyContentSpaceBetween:!0,children:[s.jsx(l,{children:s.jsx(h,{type:"text",name:"first_name",value:e==null?void 0:e.first_name,onChange:n=>o(n),fieldErrors:{},label:"First Name *"})}),s.jsx(l,{children:s.jsx(h,{type:"text",name:"last_name",value:e==null?void 0:e.last_name,onChange:n=>o(n),fieldErrors:{},label:"Last Name *"})}),s.jsx(l,{children:s.jsx(B,{list:[],options:C,name:"role_type",value:e==null?void 0:e.role_type,onChange:n=>o(n),fieldErrors:{},label:"Role Type *"})}),s.jsxs(l,{children:[s.jsx(h,{type:"text",name:"email",value:e==null?void 0:e.email,onChange:n=>o(n),fieldErrors:{},label:"Email *"}),((c=e==null?void 0:e.email)==null?void 0:c.length)>0&&!P(e==null?void 0:e.email)&&s.jsx("p",{style:{color:"red",textAlign:"center"},children:"Invalid Email!!"})]}),s.jsxs(l,{children:[s.jsx(h,{type:"text",name:"phone_number",value:e==null?void 0:e.phone_number,onChange:n=>o(n),fieldErrors:{},label:"Phone Number *",maxLength:10}),((y=e==null?void 0:e.phone_number)==null?void 0:y.length)>0&&((u=e==null?void 0:e.phone_number)==null?void 0:u.length)<10&&s.jsx("p",{style:{color:"red",textAlign:"center"},children:"Invalid phone Number!!"})]}),s.jsx(l,{children:s.jsxs(p,{justifyContentCenter:!0,width:"100%",children:[s.jsx(h,{type:m?"text":"password",name:"password",value:e==null?void 0:e.password,onChange:n=>o(n),fieldErrors:{},label:"Password *"}),s.jsx("div",{style:{margin:"auto 5px",fontSize:"18px",cursor:"pointer"},onClick:()=>w(!m),children:s.jsx(M,{})})]})}),s.jsx(l,{children:null})]}),s.jsx(p,{justifyContentFlexEnd:!0,width:"80%",children:s.jsxs(R,{variant:"contained",color:"success",onClick:F,disabled:N,children:["Submit"," "]})})]}),s.jsx(T,{variant:"m",isLoading:r.isLoading}),s.jsx(W,{style:{container:{width:"22%"}},msg:r==null?void 0:r.msg,variant:r!=null&&r.error?"danger":"success",ghost:!0,card:!0})]})};export{G as default};
