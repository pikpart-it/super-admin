import{p as x,r as d,e as A,j as s,F as p,H as R,v as M,a as B,B as I,g as P,b as k,c as v}from"./index-DK2_FLuj.js";import{F as h,M as z}from"./Form-DaVjwe9Z.js";import{L as H,M as T}from"./index-B65Y3f8n.js";const U=x.div`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 80%;
  margin: auto;
`,W=x.div`
  width: 100%;
  padding: 10px;
`,l=x.div`
  width: 25%;
  margin: 10px;
`,J=({history:_})=>{var c,g,j,u;const[m,w]=d.useState(!1),[C,E]=d.useState([]),[r,a]=d.useState({error:!1,msg:"",isLoading:!1}),[e,S]=d.useState({first_name:"",last_name:"",email:"",phone_number:"",password:"",role_type:{roleName:"",id:0}}),o=n=>{S({...e,[n==null?void 0:n.name]:n==null?void 0:n.value})},L=async()=>{let n=`${v.baseUrl}/utilities/roleMasters`;try{const{data:t}=await P(n);E(t==null?void 0:t.data)}catch{}},F=async()=>{var y,f,b;a({...r,isLoading:!0});let n=`${v.baseUrl}/auth/registerAdmin`;const t={...e,resource_type:(y=e==null?void 0:e.role_type)==null?void 0:y.roleName,role_id:(f=e==null?void 0:e.role_type)==null?void 0:f.id,role_type:(b=e==null?void 0:e.role_type)==null?void 0:b.roleName};try{const{data:i}=await k(n,t);a({...r,isLoading:!1,error:i==null?void 0:i.error,msg:i==null?void 0:i.message}),setTimeout(()=>{a({...r,msg:""}),_.goBack()},3e3)}catch{a({...r,isLoading:!1,error:!0,msg:"Something Went Wrong!"}),setTimeout(()=>{a({...r,msg:""})},3e3)}},N=A({...e,role_type:(c=e==null?void 0:e.role_type)==null?void 0:c.roleName});return d.useEffect(()=>{L()},[]),s.jsxs("div",{children:[s.jsx(p,{justifyContentCenter:!0,children:s.jsx(R,{children:"Register Sale Admin Users"})}),s.jsx(U,{children:s.jsx(W,{children:s.jsxs(p,{column:!0,alignItemsCenter:!0,margin:"auto",wrap:!0,width:"100%",children:[s.jsx(l,{children:s.jsx(h,{type:"text",name:"first_name",value:e==null?void 0:e.first_name,onChange:n=>o(n),fieldErrors:{},label:"First Name *"})}),s.jsx(l,{children:s.jsx(h,{type:"text",name:"last_name",value:e==null?void 0:e.last_name,onChange:n=>o(n),fieldErrors:{},label:"Last Name *"})}),s.jsx(l,{children:s.jsx(z,{list:[],options:C,name:"role_type",value:e==null?void 0:e.role_type,onChange:n=>o(n),fieldErrors:{},label:"Role Type *"})}),s.jsxs(l,{children:[s.jsx(h,{type:"text",name:"email",value:e==null?void 0:e.email,onChange:n=>o(n),fieldErrors:{},label:"Email *"}),((g=e==null?void 0:e.email)==null?void 0:g.length)>0&&!M(e==null?void 0:e.email)&&s.jsx("p",{style:{color:"red",textAlign:"center"},children:"Invalid Email!!"})]}),s.jsxs(l,{children:[s.jsx(h,{type:"text",name:"phone_number",value:e==null?void 0:e.phone_number,onChange:n=>o(n),fieldErrors:{},label:"Phone Number *",maxLength:10}),((j=e==null?void 0:e.phone_number)==null?void 0:j.length)>0&&((u=e==null?void 0:e.phone_number)==null?void 0:u.length)<10&&s.jsx("p",{style:{color:"red",textAlign:"center"},children:"Invalid phone Number!!"})]}),s.jsx(l,{children:s.jsxs(p,{justifyContentCenter:!0,width:"100%",children:[s.jsx(h,{type:m?"text":"password",name:"password",value:e==null?void 0:e.password,onChange:n=>o(n),fieldErrors:{},label:"Password *"}),s.jsx("div",{style:{margin:"auto 5px",fontSize:"18px",cursor:"pointer"},onClick:()=>w(!m),children:s.jsx(B,{})})]})}),s.jsx(l,{children:null})]})})}),s.jsx(p,{justifyContentFlexEnd:!0,width:"80%",children:s.jsxs(I,{variant:"contained",color:"success",onClick:F,disabled:N,children:["Submit"," "]})}),s.jsx(H,{variant:"m",isLoading:r.isLoading}),s.jsx(T,{style:{container:{width:"22%"}},msg:r==null?void 0:r.msg,variant:r!=null&&r.error?"danger":"success",ghost:!0,card:!0})]})};export{J as default};
